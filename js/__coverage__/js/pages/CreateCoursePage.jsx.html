<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for js/pages/CreateCoursePage.jsx</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="../../prettify.css">

    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">js/pages/CreateCoursePage.jsx</span></h1>
    <h2>
        
        Statements: <span class="metric">32.26% <small>(10 / 31)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 2)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">8.33% <small>(1 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">32.26% <small>(10 / 31)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">js/pages/</a> &#187; CreateCoursePage.jsx</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
&nbsp;
var React = require("react/addons");        // var React         = require('react/addons');
var when = require("when");                 // var when          = require('when');
var Navigation = require("react-router").Navigation;        // var Navigation    = require('react-router').Navigation;
var DocumentTitle = require("react-document-title");        // var DocumentTitle = require('react-document-title');
&nbsp;
var awsAPI = require("../utils/awsAPI");                    // var awsAPI        = require('../utils/awsAPI');
var CourseAPI = require("../utils/CourseAPI");              // var CourseAPI     = require('../utils/CourseAPI');
var FileInput = require("../components/FileInput.jsx");     // var FileInput     = require('../components/FileInput.jsx');
&nbsp;
var CreateCoursePage = React.createClass({
  displayName: "CreateCoursePage",
&nbsp;
  mixins: [Navigation, React.addons.LinkedStateMixin],
&nbsp;
  propTypes: {
    currentUser: React.PropTypes.object.isRequired,
    course: React.PropTypes.object.isRequired
  },
&nbsp;
  getDefaultProps: function getDefaultProps() {             // Line 21:   getDefaultProps: function() {
    return {
      currentUser: {},
      course: {}
    };
  },
&nbsp;
  getInitialState: <span class="fstat-no" title="function not covered" >function getInitialState() {</span>             // Line 28:   getInitialState: function() {
<span class="cstat-no" title="statement not covered" >    return {</span>
      title: "",                                            // Line 30:       title: '',
      description: "",                                      // Line 31:       description: '',
      image: null
    };
  },
&nbsp;
  updateImage: <span class="fstat-no" title="function not covered" >function updateImage(file) {</span>                 // Line 36:   updateImage: function(file) {
<span class="cstat-no" title="statement not covered" >    this.setState({ image: file });</span>
  },
&nbsp;
  createCourse: <span class="fstat-no" title="function not covered" >function createCourse(course) {</span>             // Line 40:   createCourse: function(course) {
<span class="cstat-no" title="statement not covered" >    var deferred = when.defer();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    CourseAPI.create(course).then(<span class="fstat-no" title="function not covered" >function (createdCourse) {</span>        // Line 43:     CourseAPI.create(course).then(function(createdCourse) {</span>
<span class="cstat-no" title="statement not covered" >      console.log("course created:", createdCourse); </span>               // Line 44:       console.log('course created:', createdCourse);
<span class="cstat-no" title="statement not covered" >      deferred.resolve(createdCourse);</span>
    })["catch"](<span class="fstat-no" title="function not covered" >function (err) {</span>                                    // Line 46:     }).catch(function(err) {
<span class="cstat-no" title="statement not covered" >      console.log("error creating course:", err); </span>                  // Line 47:       console.log('error creating course:', err);
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return deferred.promise;</span>
  },
&nbsp;
  uploadImage: <span class="fstat-no" title="function not covered" >function uploadImage(course) {</span>                       // Line 53:   uploadImage: function(course) {
<span class="cstat-no" title="statement not covered" >    var deferred = when.defer();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (this.state.image) {                                         // Line 56:     if ( this.state.image ) {</span>
<span class="cstat-no" title="statement not covered" >      awsAPI.uploadCourseImage(this.state.image, course.id).then(<span class="fstat-no" title="function not covered" >function () {</span>      // Line 57:       awsAPI.uploadCourseImage(this.state.image, course.id).then(function() {</span>
<span class="cstat-no" title="statement not covered" >        deferred.resolve(course);</span>
      })["catch"](<span class="fstat-no" title="function not covered" >function (err) {</span>                                                  // Line 59:       }).catch(function(err) {
<span class="cstat-no" title="statement not covered" >        console.log("error uploading course image:", err); </span>                         // Line 60:         console.log('error uploading course image:', err);
      });
    } else {
<span class="cstat-no" title="statement not covered" >      deferred.resolve(course);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return deferred.promise;</span>
  },
&nbsp;
  handleSubmit: <span class="fstat-no" title="function not covered" >function handleSubmit(evt) {</span>                                        // Line 69:   handleSubmit: function(evt) {
<span class="cstat-no" title="statement not covered" >    var course = {</span>
      title: this.state.title,
      description: this.state.description
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    evt.stopPropagation();</span>
<span class="cstat-no" title="statement not covered" >    evt.preventDefault();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    this.createCourse(course).then(this.uploadImage).then((<span class="fstat-no" title="function not covered" >function (createdCourse) {</span>       // Line 78:     this.createCourse(course).then(this.uploadImage).then(function(createdCourse) {</span>
<span class="cstat-no" title="statement not covered" >      this.transitionTo("Course", { courseId: createdCourse.id }); </span>                         // Line 79:       this.transitionTo('Course', { courseId: createdCourse.id });
    }).bind(this));                                                                         // Line 80:     }.bind(this));
  },
&nbsp;
  render: <span class="fstat-no" title="function not covered" >function render() {</span>                                                               // Line 83:   render: function() {
<span class="cstat-no" title="statement not covered" >    return React.createElement(                                                             //       &lt;DocumentTitle title="Create a Course"&gt;</span>
      DocumentTitle,
      { title: "Create a Course" },
      React.createElement(                                                  // Line 86:         &lt;section className="create-course nudge"&gt;
        "section",
        { className: "create-course nudge" },
        React.createElement(                                        // Line 88:           &lt;h2 className="page-title"&gt;Create a Course&lt;/h2&gt;
          "h2",
          { className: "page-title" },
          "Create a Course"
        ),
        React.createElement(                        // Line 90:           &lt;form className="create-course-form" id="create-course-form" onSubmit={this.handleSubmit}&gt;
          "form",
          { className: "create-course-form", id: "create-course-form", onSubmit: this.handleSubmit },
          React.createElement("input", { type: "text", valueLink: this.linkState("title"), placeholder: "Course title", className: "title-input nudge-half--bottom" }),     // Line 92:             &lt;input type="text" valueLink={this.linkState('title')} placeholder="Course title" className="title-input nudge-half--bottom" /&gt;
          React.createElement("textarea", { valueLink: this.linkState("description"),                                                                                       // Line 94:             &lt;textarea valueLink={this.linkState('description')}
            className: "description-input nudge-half--bottom",                                                                                                              // Line 95:                     className="description-input nudge-half--bottom"
            placeholder: "Brief description of the course" }),                                                                                                              // Line 96:                     placeholder="Brief description of the course" /&gt;
          React.createElement(FileInput, { id: "imageUrl", className: "image-input nudge-half--bottom", accept: "image/x-png, image/gif, image/jpeg", processFile: this.updateImage }),     // Line 98:             &lt;FileInput id="imageUrl" className="image-input nudge-half--bottom" accept="image/x-png, image/gif, image/jpeg" processFile={this.updateImage} /&gt;
          React.createElement("input", { type: "submit", className: "button float-right nudge--bottom", value: "Create Course" })                                                           // Line 100:             &lt;input type="submit" className="button float-right nudge--bottom" value="Create Course" /&gt;
        )                                                                                                                                                                                   // Line 102:           &lt;/form&gt;
      )                                                                                                                                                                                     // Line 104:         &lt;/section&gt;
    );
  }
&nbsp;
});
&nbsp;
module.exports = CreateCoursePage;
// SourceMap was distributed to comments by gulp-jsx-coverage</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Apr 14 2015 13:17:18 GMT-0400 (EDT)</div>
</div>

<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>

<script src="../../sorter.js"></script>
</body>
</html>
